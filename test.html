<!DOCTYPE html>

<head>
    <title>Divvy Explorer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Shows the origin-destination pair, by neighborhood, of every Divvy bike share trip taken in Chicago."
    <meta charset="utf-8">

<script src="js/d3.min.js"></script>
<script src="js/crossfilter.js"></script>
<script src="js/dc.js"></script>
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="style/dc.css">

<body>

<div id="chart-line-hitsperday"></div>

<script>

var data = [{"trip_id":3940,start_date:"2013-06-27 00:00:00","start_time":"01:06:00","end_date":"2013-06-27","end_time":"09:46:00","start_dayofweek":"Thursday","tripduration":31177,"usertype":"Subscriber","gender":"Male","meters":2365,"age_in_2014":32},{"trip_id":4095,start_date:"2013-06-27 00:00:00","start_time":"12:06:00","end_date":"2013-06-27","end_time":"12:11:00","start_dayofweek":"Thursday","tripduration":301,"usertype":"Subscriber","gender":"Male","meters":0,"age_in_2014":32},{"trip_id":4113,start_date:"2013-06-27 00:00:00","start_time":"11:09:00","end_date":"2013-06-27","end_time":"11:11:00","start_dayofweek":"Thursday","tripduration":140,"usertype":"Subscriber","gender":"Male","meters":0,"age_in_2014":32},{"trip_id":4118,start_date:"2013-06-27 00:00:00","start_time":"12:11:00","end_date":"2013-06-27","end_time":"12:16:00","start_dayofweek":"Thursday","tripduration":316,"usertype":"Customer","gender":"","meters":3284,"age_in_2014":0},{"trip_id":4119,start_date:"2013-06-27 00:00:00","start_time":"11:12:00","end_date":"2013-06-27","end_time":"11:13:00","start_dayofweek":"Thursday","tripduration":87,"usertype":"Subscriber","gender":"Male","meters":0,"age_in_2014":32},{"trip_id":4134,start_date:"2013-06-27 00:00:00","start_time":"11:24:00","end_date":"2013-06-27","end_time":"14:38:00","start_dayofweek":"Thursday","tripduration":11674,"usertype":"Subscriber","gender":"Male","meters":599,"age_in_2014":36},{"trip_id":4162,start_date:"2013-06-27 00:00:00","start_time":"11:39:00","end_date":"2013-06-27","end_time":"16:01:00","start_dayofweek":"Thursday","tripduration":15758,"usertype":"Subscriber","gender":"Male","meters":6991,"age_in_2014":32},{"trip_id":4192,start_date:"2013-06-27 00:00:00","start_time":"12:15:00","end_date":"2013-06-27","end_time":"12:16:00","start_dayofweek":"Thursday","tripduration":60,"usertype":"Subscriber","gender":"Male","meters":0,"age_in_2014":32},{"trip_id":4216,start_date:"2013-06-27 00:00:00","start_time":"13:00:00","end_date":"2013-06-27","end_time":"13:03:00","start_dayofweek":"Thursday","tripduration":171,"usertype":"Subscriber","gender":"Male","meters":637,"age_in_2014":32},{"trip_id":4255,start_date:"2013-06-27 00:00:00","start_time":"13:18:00","end_date":"2013-06-27","end_time":"19:34:00","start_dayofweek":"Thursday","tripduration":22549,"usertype":"Subscriber","gender":"Male","meters":4363,"age_in_2014":32},{"trip_id":4263,start_date:"2013-06-27 00:00:00","start_time":"14:39:00","end_date":"2013-06-27","end_time":"14:40:00","start_dayofweek":"Thursday","tripduration":62,"usertype":"Subscriber","gender":"Male","meters":5615,"age_in_2014":36},{"trip_id":4275,start_date:"2013-06-27 00:00:00","start_time":"14:44:00","end_date":"2013-06-27","end_time":"14:45:00","start_dayofweek":"Thursday","tripduration":64,"usertype":"Customer","gender":"","meters":0,"age_in_2014":0},{"trip_id":4288,start_date:"2013-06-27 00:00:00","start_time":"14:56:00","end_date":"2013-06-27","end_time":"14:57:00","start_dayofweek":"Thursday","tripduration":66,"usertype":"Subscriber","gender":"Male","meters":0,"age_in_2014":31},{"trip_id":4289,start_date:"2013-06-27 00:00:00","start_time":"14:57:00","end_date":"2013-06-27","end_time":"15:05:00","start_dayofweek":"Thursday","tripduration":487,"usertype":"Subscriber","gender":"Female","meters":6970,"age_in_2014":34},{"trip_id":4291,start_date:"2013-06-27 00:00:00","start_time":"14:58:00","end_date":"2013-06-27","end_time":"15:05:00","start_dayofweek":"Thursday","tripduration":433,"usertype":"Customer","gender":"","meters":932,"age_in_2014":0},{"trip_id":4316,start_date:"2013-06-27 00:00:00","start_time":"15:06:00","end_date":"2013-06-27","end_time":"15:09:00","start_dayofweek":"Thursday","tripduration":123,"usertype":"Customer","gender":"","meters":0,"age_in_2014":0},{"trip_id":4342,start_date:"2013-06-27 00:00:00","start_time":"15:13:00","end_date":"2013-06-27","end_time":"15:27:00","start_dayofweek":"Thursday","tripduration":852,"usertype":"Customer","gender":"","meters":1730,"age_in_2014":0},{"trip_id":4343,start_date:"2013-06-27 00:00:00","start_time":"15:09:00","end_date":"2013-06-27","end_time":"15:14:00","start_dayofweek":"Thursday","tripduration":272,"usertype":"Subscriber","gender":"Male","meters":0,"age_in_2014":31},{"trip_id":4345,start_date:"2013-06-27 00:00:00","start_time":"16:14:00","end_date":"2013-06-27","end_time":"16:15:00","start_dayofweek":"Thursday","tripduration":83,"usertype":"Subscriber","gender":"Male","meters":7263,"age_in_2014":32},{"trip_id":4346,start_date:"2013-06-27 00:00:00","start_time":"15:14:00","end_date":"2013-06-28","end_time":"00:18:00","start_dayofweek":"Thursday","tripduration":32646,"usertype":"Subscriber","gender":"Male","meters":4015,"age_in_2014":36},{"trip_id":4350,start_date:"2013-06-27 00:00:00","start_time":"15:15:00","end_date":"2013-06-27","end_time":"15:27:00","start_dayofweek":"Thursday","tripduration":730,"usertype":"Subscriber","gender":"Female","meters":8894,"age_in_2014":34},{"trip_id":4378,start_date:"2013-06-27 00:00:00","start_time":"15:54:00","end_date":"2013-06-27","end_time":"23:15:00","start_dayofweek":"Thursday","tripduration":26479,"usertype":"Subscriber","gender":"Male","meters":5935,"age_in_2014":31},{"trip_id":4384,start_date:"2013-06-27 00:00:00","start_time":"16:42:00","end_date":"2013-06-27","end_time":"22:23:00","start_dayofweek":"Thursday","tripduration":20457,"usertype":"Subscriber","gender":"Female","meters":4448,"age_in_2014":34},{"trip_id":4389,start_date:"2013-06-27 00:00:00","start_time":"16:34:00","end_date":"2013-06-27","end_time":"16:36:00","start_dayofweek":"Thursday","tripduration":127,"usertype":"Subscriber","gender":"Female","meters":0,"age_in_2014":34},{"trip_id":4390,start_date:"2013-06-27 00:00:00","start_time":"16:41:00","end_date":"2013-06-27","end_time":"16:50:00","start_dayofweek":"Thursday","tripduration":528,"usertype":"Subscriber","gender":"Female","meters":0,"age_in_2014":34}];
        
var ndx = crossfilter(data); 

var parseDate = d3.time.format("%m/%d/%Y").parse;

data.forEach(function(d) {
    d.date = parseDate(d.start_date);
    d.total = 1;
});

var dateDim = ndx.dimension(function(d) {return d.date;});
var hits = dateDim.group().reduceSum(function(d) {return d.total;}); 

var minDate = dateDim.bottom(1)[0].date;
var maxDate = dateDim.top(1)[0].date;

var hitslineChart  = dc.lineChart("#chart-line-hitsperday"); 

hitslineChart
    .width(500).height(200)
    .dimension(dateDim)
    .group(hits)
    .x(d3.time.scale().domain([minDate,maxDate])); 

    dc.renderAll(); 


</script>

</body>

</html>